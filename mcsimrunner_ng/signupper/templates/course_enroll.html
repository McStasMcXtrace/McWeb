{% extends 'course_manage.html' %}
{% block content %}

<div style="margin-left:auto; margin-right:auto; width:600px;">
<form enctype="multipart/form-data" method="POST" action="{{ uploadnext }}">
    {% csrf_token %}
    <fieldset style="margin:5px;">
    <legend>Bulk add users</legend>
            <p>Upload a csv-file with the format shown below, with a header and one student pr. line.</p>
            <p>Then click the "Add users" button at the bottom of the page.</p>
            <p>--- example:</p>
        <table>
            <tr><td colspan="2">firstname,lastname,email,username,course</td></tr>
            <tr><td colspan="2">John,Doe,johndoe@e-neutrons.org,johndoe,ku_intro-ns_20160101</td></tr>
            <tr><td colspan="2">Jane Else,Hansen,jlh@e-neutrons.org,jlh,ku_intro-ns_20160101</td></tr>
        </table>
        <table>
            <tr><td><input type="file" name="up_file"></td></tr>
            <tr><td><input type="submit" value="Upload" style="margin-right:20px;"></td></tr>
        </table>
    </fieldset>
</form>
</div>

<form enctype="multipart/form-data" method="POST" action="{{ next }}" style="display:{{ displaysignups }}">
    <input type="hidden" name="ids" value="{{ ids }}">
    {% csrf_token %}
    <fieldset style="margin:5px;">
        <table>
            <!-- create headers -->
            <tr>
            {% for header in colheaders %}
                <th  style="min-width:70px;"><label>{{ header.data }}</label></td>
            {% endfor %}
            </tr>
            <!-- create rows -->
            {% for row, id in rows_ids %}
                <tr>
                {% for cell in row %}
                    {% if cell.btn %}
                    <td style="text-align:center;"><input type="button" name="{{ id }}_{{ cell.data }}" onclick="location.href='/coursemanage/users/delete/{{ id }}';" value="{{ cell.data }}"/></td>
                    {% elif cell.txt %}
                    <td style="text-align:left;"><input style="text-align:center;" type="text" name="{{ id }}_{{ cell.header }}" value="{{ cell.data }}"/></td>
                    {% else %}
                    <td style="text-align:center;"><label name="{{ id }}_{{ cell.data }}">{{ cell.data }}</label></td>
                    {% endif %}
                {% endfor %}
                </tr>
            {% endfor %}
        </table>
        <div style="text-align:right;"><input type="submit" value="Add users" style="margin-right:20px;"></div>
    </fieldset>
</form>

{% endblock %}
